{% extends '::base.html.twig' %}
{% block placeholder -%}
<div class="row">
    <div class="col-lg-12">
        
        <div class="clearfix">
            <h1 class="pull-left">Agregar cliente</h1>
           
        </div>
    </div>
</div>
{% endblock -%}
{% block body -%}
<div class="row">
<div class="col-lg-12">
<div class="main-box no-header clearfix">
<div class="main-box-body clearfix">
<h1 class="text-center"><strong>Marco Familiar </strong></h1>

{{ form_start(form) }}
<div class="col-md-12 main-box no-header clearfix">
<div class="row">
	<div class="col-lg-6">
    	<h4 class="col-md-12">ESPOSA (Y/O) HIJOS, PADRES Y HERMANOS</h4> 
    </div>
    <div class="col-lg-6">
    	<a href="#" class="col-md-4 col-md-offset-4 btn btn-info pull-left" id="add-MarcoFamiliar">Agregar </a>
    </div>
</div>
<div class="row">
    <div  id="FamiliaresCercanos" data-prototype="{{ form_widget(form.FamiliaresCercanos.vars.prototype) | e }}" >    
        {% for FamiliarCercano in form.FamiliaresCercanos %}
	        <div class="col-md-12">
	            {{ form_errors(FamiliarCercano) }}
	            {{ form_widget(FamiliarCercano) }}
	        </div> 
        {% endfor %}
    </div>     
</div>       
     
<div class="row">   
	<div class="col-lg-6">  
    	<h4 class="col-md-12">OTROS DEPENDIENTES ECONOMICOS </h4>
    </div>
    <div class="col-lg-6">
    	<a href="#" class="col-md-4 col-md-offset-4 btn btn-info pull-left" id="add-MarcoFamiliar2">Agregar</a>
    </div>
</div>
<div class="row"> 
    <div  id="DependientesEconomicos" data-prototype="{{ form_widget(form.DependientesEconomicos.vars.prototype) | e }}">
        {% for DependienteEconomico in form.DependientesEconomicos %}
        <div class="col-md-12">        	
	            {{ form_errors(DependienteEconomico) }}
	            {{ form_widget(DependienteEconomico) }}
        </div> 
        {% endfor %}
    </div>    
</div>    
<div class="row">   
	<div class="col-md-12">
	      <div class="input-group">
	        <span class="input-group-btn"><label for="" class="btn btn-primary required">observaciones</label>
	        </span>
	        {{form_widget(form.observaciones,{'attr':{'class':'form-control'}})}}

	    </div>
	    <span class="help-block"><i class="icon-remove-sign"></i></span>
	</div>
</div>
</div>
	<div class="oculto">
	{{ form_row(form.DependientesEconomicos) }}
	{{ form_row(form.FamiliaresCercanos) }}		
	</div>
{{form_rest(form)}}
{{ form_end(form) }}
 </div>
</div>
</div>
{% endblock %}
{% block js %}
<script type="text/javascript">
$('.oculto').hide();
       jQuery(document).ready(function() {
    	var emailCount2 = '{{ form.DependientesEconomicos | length }}';
	    var emailCount3 = '{{ form.FamiliaresCercanos | length }}';
       
        jQuery('#add-MarcoFamiliar2').click(function() {
            var emailList1 = jQuery('#DependientesEconomicos');
            var newWidget1 = emailList1.attr('data-prototype');
            newWidget1 = newWidget1.replace(/__name__/g, emailCount2);
            emailCount2++;
            var newLi1 = jQuery('<div class="row"></div>').html(newWidget1);
            newLi1.appendTo(jQuery('#DependientesEconomicos'));

            return false;
        });


        jQuery('#add-MarcoFamiliar').click(function() {
            var emailList2 = jQuery('#FamiliaresCercanos');
            var newWidget2 = emailList2.attr('data-prototype');         
            newWidget2 = newWidget2.replace(/__name__/g, emailCount3);
            emailCount3++;
            // crea un nuevo elemento lista y lo a√±ade a la lista
            var newLi2 = jQuery('<div class="row separado"></div>').html(newWidget2);
            newLi2.appendTo(jQuery('#FamiliaresCercanos'));

            return false;
        });    



    })
</script>
{% endblock %}